{% extends "base.html" %}

{% block title %}Create Cycle {{ next_number }} - {{ phase.project_name }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
        <a href="{{ url_for('cycles.list_cycles') }}" class="text-blue-600 hover:underline text-sm">
            &larr; Back to Cycles
        </a>
        <h1 class="text-2xl font-bold text-gray-900 mt-2">Create Inspection Cycle {{ next_number }}</h1>
        <p class="text-gray-600">{{ phase.project_name }} - {{ phase.phase_name }}</p>
    </div>

    <!-- Form -->
    <form method="POST" class="bg-white rounded-lg shadow p-6">
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-1">
                Cycle Number
            </label>
            <input type="text" value="{{ next_number }}" disabled
                   class="w-20 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-600">
            <p class="text-xs text-gray-500 mt-1">Auto-assigned</p>
        </div>

        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
                Unit Range
            </label>
            <div class="flex items-center gap-3">
                <select name="unit_start" 
                        class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">All units</option>
                    {% for unit in units %}
                    <option value="{{ unit.unit_number }}">{{ unit.unit_number }}</option>
                    {% endfor %}
                </select>
                <span class="text-gray-500">to</span>
                <select name="unit_end" 
                        class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">All units</option>
                    {% for unit in units %}
                    <option value="{{ unit.unit_number }}">{{ unit.unit_number }}</option>
                    {% endfor %}
                </select>
            </div>
            <p class="text-xs text-gray-500 mt-1">Leave empty to include all units in this cycle</p>
        </div>

        <div class="mb-6">
            <label for="general_notes" class="block text-sm font-medium text-gray-700 mb-1">
                General Notes
            </label>
            <textarea id="general_notes" name="general_notes" rows="4"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                      placeholder="Site conditions, items not testable, contractor notes..."></textarea>
            <p class="text-xs text-gray-500 mt-1">These notes will appear on all inspection reports for this cycle</p>
        </div>

        <div class="flex gap-3">
            <button type="submit" 
                    class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                Create Cycle
            </button>
            <a href="{{ url_for('cycles.list_cycles') }}" 
               class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                Cancel
            </a>
        </div>
        
        <p class="text-sm text-gray-500 mt-4">
            After creating, you can set which items to exclude from this cycle.
        </p>
    </form>
</div>
{% endblock %}
